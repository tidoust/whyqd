{"name": "test_method", "schema_fields": [{"name": "la_code", "title": "Local authority code", "description": "Standard code for local authority.", "type": "string"}, {"name": "ba_ref", "title": "Billing reference", "description": "Unique code for a specific hereditament. May be multiple rows for history.", "type": "string"}, {"name": "prop_ba_rates", "title": "Property billing rates", "description": "Actual rates paid by a specific ratepayer.", "type": "number"}, {"name": "occupant_name", "title": "Occupier name", "description": "Name of the ratepayer.", "type": "string"}, {"name": "postcode", "title": "Postcode", "description": "Full address or postcode of ratepayer.", "type": "string"}, {"name": "occupation_state", "title": "Occupation state", "description": "Occupation status, void or occupied.", "type": "boolean"}, {"name": "occupation_state_date", "title": "Date of occupation state", "description": "Date of the start of status in occupation_state.", "type": "date"}, {"name": "occupation_state_reliefs", "title": "Occupation state reliefs", "description": "Array of the categories of reliefs / exemptions applied.", "type": "array", "constraints": {"enum": [{"name": "small_business"}, {"name": "rural"}, {"name": "charity"}, {"name": "enterprise_zone"}, {"name": "vacancy"}, {"name": "hardship"}, {"name": "retail"}, {"name": "discretionary"}, {"name": "exempt"}, {"name": "transitional"}, {"name": "other"}]}}], "input_data": [{"path": "/mnt/c/users/turukawa/documents/github/whyqd/tests/data/raw_E06000044_014_0.XLSX", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"name": "Property Reference Number", "type": "number"}, {"name": "Primary Liable party name"}, {"name": "Full Property Address"}, {"name": "Current Relief Type"}, {"name": "Account Start date"}, {"name": "Current Relief Award Start Date"}, {"name": "Current Rateable Value", "type": "number"}], "key": {"name": "Property Reference Number"}, "checksum": "b180bd9fe8c3b1025f433e0b3377fb9a738523b9c33eac5d62ed83c51883e1f64a3895edf0fc9e96a85a4130df3392177dff262963338971114aa4f5d1b0a70e"}, {"path": "/mnt/c/users/turukawa/documents/github/whyqd/tests/data/raw_E06000044_014_1.XLSX", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"name": "Property Reference Number", "type": "number"}, {"name": "Full Property Address"}, {"name": "Current Property Exemption Code"}, {"name": "Current Prop Exemption Start Date"}, {"name": "Primary Liable party name"}, {"name": "Current Rateable Value", "type": "number"}], "key": {"name": "Property Reference Number"}, "checksum": "98e23e4eac6782873492181d6e4f3fcf308f1bb0fc47dc582c3fdf031c020a651d9f06f6510b21405c3f63b8d576a93a27bd2f3cc5b053d8d9022c884b57d3a3"}, {"path": "/mnt/c/users/turukawa/documents/github/whyqd/tests/data/raw_E06000044_014_2.XLSX", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"name": "Property ref no", "type": "number"}, {"name": "Full Property Address"}, {"name": "Primary Liable party name"}, {"name": "Account Start date"}, {"name": "Current Rateable Value", "type": "number"}], "key": {"name": "Property ref no"}, "checksum": "9fd3d0df6cc1e0e58ab481ca9d46b68150b3b8d0c97148a00417af16025ba066e29a35994d0e4526edb1deda4c10b703df8f0dbcc23421dd6c0c0fd1a4c6b01c"}], "working_data": {"path": "/mnt/c/users/turukawa/documents/github/sqwyre-assets/tests/working_test_method_c553a53b8b094e64a714d5bab1c7f914.xlsx", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"name": "Property ref no", "type": "number"}, {"name": "Full Property Address_x"}, {"name": "Primary Liable party name_x"}, {"name": "Account Start date_x"}, {"name": "Current Rateable Value_x", "type": "number"}, {"name": "Full Property Address_y"}, {"name": "Current Property Exemption Code"}, {"name": "Current Prop Exemption Start Date"}, {"name": "Primary Liable party name_y"}, {"name": "Current Rateable Value_y", "type": "number"}, {"name": "Primary Liable party name"}, {"name": "Full Property Address"}, {"name": "Current Relief Type"}, {"name": "Account Start date_y"}, {"name": "Current Relief Award Start Date"}, {"name": "Current Rateable Value", "type": "number"}], "preserve": [{"name": "Full Property Address_x"}, {"name": "Primary Liable party name_x"}, {"name": "Account Start date_x"}, {"name": "Full Property Address_y"}, {"name": "Current Property Exemption Code"}, {"name": "Current Prop Exemption Start Date"}, {"name": "Primary Liable party name_y"}, {"name": "Primary Liable party name"}, {"name": "Full Property Address"}, {"name": "Current Relief Type"}, {"name": "Account Start date_y"}, {"name": "Current Relief Award Start Date"}], "actions": [{"script": "MERGE < ['Property ref no'::'37d361253aec44bbb4a25840772b30ec', 'Property Reference Number'::'eb6505702f8c4e6d9b13f057437bb772', 'Property Reference Number'::'eca2e4800dc14d9da857ceed8ec9ebea']"}, {"script": "NEW > 'la_code' < ['E06000044']"}, {"script": "RENAME > 'ba_ref' < ['Property ref no']"}, {"script": "ORDER > 'prop_ba_rates' < ['Current Rateable Value_x', 'Current Rateable Value_y', 'Current Rateable Value']"}, {"script": "ORDER > 'occupant_name' < ['Primary Liable party name_x', 'Primary Liable party name_y', 'Primary Liable party name']"}, {"script": "ORDER > 'postcode' < ['Full Property Address_x', 'Full Property Address_y', 'Full Property Address']"}, {"script": "CATEGORISE > 'occupation_state' < [+ 'Current Property Exemption Code', + 'Current Relief Type']"}, {"script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state'::False < 'Current Property Exemption Code'::['EPRN', 'EPRI', 'VOID', 'EPCH', 'LIQUIDATE', 'DECEASED', 'PROHIBITED', 'BANKRUPT']"}, {"script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state'::False < 'Current Relief Type'::['Empty Property Rate Non-Industrial', 'Empty Property Rate Industrial', 'Empty Property Rate Charitable']"}, {"script": "CATEGORISE > 'occupation_state_reliefs' < [+ 'Current Property Exemption Code', + 'Current Relief Type']"}, {"script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'small_business' < 'Current Relief Type'::['Small Business Relief England', 'Sbre Extension For 12 Months', 'Supporting Small Business Relief']"}, {"script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'enterprise_zone' < 'Current Property Exemption Code'::['INDUSTRIAL']"}, {"script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'vacancy' < 'Current Property Exemption Code'::['EPRN', 'EPRI', 'VOID', 'EPCH', 'LIQUIDATE', 'DECEASED', 'PROHIBITED', 'BANKRUPT']"}, {"script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'vacancy' < 'Current Relief Type'::['Empty Property Rate Non-Industrial', 'Empty Property Rate Industrial', 'Empty Property Rate Charitable']"}, {"script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'retail' < 'Current Relief Type'::['Retail Discount']"}, {"script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'exempt' < 'Current Property Exemption Code'::['C', 'LOW RV', 'LAND']"}, {"script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'other' < 'Current Relief Type'::['Sports Club (Registered CASC)', 'Mandatory']"}, {"script": "ORDER_NEW > 'occupation_state_date' < ['Current Prop Exemption Start Date' + 'Current Prop Exemption Start Date', 'Current Relief Award Start Date' + 'Current Relief Award Start Date', 'Account Start date_x' + 'Account Start date_x', 'Account Start date_y' + 'Account Start date_y']"}], "checksum": "770918e9ca724e18a838306e50ad206e74ed84f77d68e85d5543cf0bad54c3f5d02a02831342466e17f52da25d28c71ccd0c65dcef458808e55cdd9546ff4d4c"}, "restructured_data": {"path": "/mnt/c/users/turukawa/documents/github/sqwyre-assets/tests/restructured_test_method_c553a53b8b094e64a714d5bab1c7f914.xlsx", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"name": "ba_ref", "type": "number"}, {"name": "occupation_state"}, {"name": "prop_ba_rates"}, {"name": "occupation_state_reliefs"}, {"name": "occupant_name"}, {"name": "la_code"}, {"name": "occupation_state_date"}, {"name": "postcode"}], "preserve": [{"name": "occupation_state"}, {"name": "prop_ba_rates"}, {"name": "occupation_state_reliefs"}, {"name": "occupant_name"}, {"name": "la_code"}, {"name": "occupation_state_date"}, {"name": "postcode"}], "checksum": "b4bb597c444e783bd431803e478e92f896039d9cc6c1a1f03d33329e01faad336d832f42d365c5b95e4aa26fe18c5f64bdf15c49b9b605eb97a0b5216a50aec9"}, "version": [{"description": "Build merged data.", "updated": "2021-08-21T14:51:22.369152"}, {"description": "Build restructured data.", "updated": "2021-08-21T14:52:03.570210"}, {"name": "Gavin Chait", "description": "Save method.", "updated": "2021-08-21T14:52:03.570846"}]}