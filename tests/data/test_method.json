{"uuid": "21ef69ff-a24d-4b2d-ac22-06470d413b33", "name": "test_method", "schema_fields": [{"uuid": "901958d2-5d0d-4c35-a7e5-e8d3c8e9f391", "name": "la_code", "title": "Local authority code", "description": "Standard code for local authority.", "type": "string"}, {"uuid": "8facb6ee-e0db-4d8a-9faa-134654d819c2", "name": "ba_ref", "title": "Billing reference", "description": "Unique code for a specific hereditament. May be multiple rows for history.", "type": "string"}, {"uuid": "c3c2d6d8-c5eb-4ae0-8655-769bb8a98001", "name": "prop_ba_rates", "title": "Property billing rates", "description": "Actual rates paid by a specific ratepayer.", "type": "number"}, {"uuid": "15fb847d-f5b5-4bef-8102-5161c5d3e408", "name": "occupant_name", "title": "Occupier name", "description": "Name of the ratepayer.", "type": "string"}, {"uuid": "36177aff-12d2-4045-b999-a54f43942422", "name": "postcode", "title": "Postcode", "description": "Full address or postcode of ratepayer.", "type": "string"}, {"uuid": "2dad56cd-6a01-4732-8683-6a8784ace3ae", "name": "occupation_state", "title": "Occupation state", "description": "Occupation status, void or occupied.", "type": "boolean"}, {"uuid": "df34b923-ae18-42b6-9120-7b958094a862", "name": "occupation_state_date", "title": "Date of occupation state", "description": "Date of the start of status in occupation_state.", "type": "date"}, {"uuid": "9ca56602-90b0-45b2-9f9e-2d1ed940d358", "name": "occupation_state_reliefs", "title": "Occupation state reliefs", "description": "Array of the categories of reliefs / exemptions applied.", "type": "array", "constraints": {"enum": [{"uuid": "8640e681-aa92-4bf2-ba86-c659733f0674", "name": "small_business"}, {"uuid": "12035508-8fb9-4fe2-8e52-cd82c9888977", "name": "rural"}, {"uuid": "2a52a005-602c-412f-bd6b-57cb241a8fc9", "name": "charity"}, {"uuid": "dc65b141-5769-481e-8a87-7e26af96219d", "name": "enterprise_zone"}, {"uuid": "06f0e0f9-29ae-40f1-b695-030c863fef9b", "name": "vacancy"}, {"uuid": "fdaf30f4-94f7-4cbd-80ad-014ca383aad3", "name": "hardship"}, {"uuid": "e1b479d0-4a74-4214-b26d-467691af3734", "name": "retail"}, {"uuid": "a841e3e6-cb9d-4592-9ef6-abd8103dc18e", "name": "discretionary"}, {"uuid": "3060606b-ca95-4968-8d2e-d108b528531a", "name": "exempt"}, {"uuid": "9c80b608-a603-43ca-aa49-d4b7ca588c51", "name": "transitional"}, {"uuid": "1575c94f-b15e-4acf-af6e-61634ded9563", "name": "other"}]}}], "input_data": [{"uuid": "cfa11a17-0822-45fe-8d91-a9e56eb52948", "path": "/mnt/c/Users/Turukawa/Documents/GitHub/whyqd/tests/data/raw_E06000044_014_2.XLSX", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"uuid": "9ba98ddf-81ef-4901-90c6-3cce5e5c839f", "name": "Property ref no", "type": "number"}, {"uuid": "015fc890-bbf3-4dc5-9119-eb77c608a7bc", "name": "Full Property Address"}, {"uuid": "835e6c49-57a5-4e6c-b5d5-35f626acc58a", "name": "Primary Liable party name"}, {"uuid": "e2b70ed4-04f1-4248-a81d-4a9eb48bf920", "name": "Account Start date"}, {"uuid": "f9129b7e-9c97-434a-9bae-8a23fe5fd854", "name": "Current Rateable Value", "type": "number"}], "key": {"uuid": "87faa874-aa74-4a21-9619-45515b291847", "name": "Property ref no"}, "checksum": "9fd3d0df6cc1e0e58ab481ca9d46b68150b3b8d0c97148a00417af16025ba066e29a35994d0e4526edb1deda4c10b703df8f0dbcc23421dd6c0c0fd1a4c6b01c", "row_count": 5331}, {"uuid": "06a7a7c6-b114-4bfa-b096-c7eb4a5fa1d8", "path": "/mnt/c/Users/Turukawa/Documents/GitHub/whyqd/tests/data/raw_E06000044_014_1.XLSX", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"uuid": "0bd77d54-770e-48da-bba2-e080d908a3c1", "name": "Property Reference Number", "type": "number"}, {"uuid": "b97901da-36f8-44e7-87d5-2017852010ec", "name": "Full Property Address"}, {"uuid": "c2ee67aa-7e11-4319-bcf0-2290775a94d7", "name": "Current Property Exemption Code"}, {"uuid": "5ed5fe64-67b5-4f13-9c42-cce20d5e64b8", "name": "Current Prop Exemption Start Date"}, {"uuid": "77ad295f-871c-4c95-9ffe-252ca3a67d66", "name": "Primary Liable party name"}, {"uuid": "835b14f3-34dd-47cf-b984-aee37fe2dc16", "name": "Current Rateable Value", "type": "number"}], "key": {"uuid": "5e4473ef-d142-4322-8a32-f1da610bf74d", "name": "Property Reference Number"}, "checksum": "98e23e4eac6782873492181d6e4f3fcf308f1bb0fc47dc582c3fdf031c020a651d9f06f6510b21405c3f63b8d576a93a27bd2f3cc5b053d8d9022c884b57d3a3", "row_count": 447}, {"uuid": "986d2d10-ecdf-4536-9dc4-4a19c2a07581", "path": "/mnt/c/Users/Turukawa/Documents/GitHub/whyqd/tests/data/raw_E06000044_014_0.XLSX", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"uuid": "9041a744-4add-4281-8513-bbfeadb008a1", "name": "Property Reference Number", "type": "number"}, {"uuid": "a53217cc-2b6d-4e58-abeb-96ddfb0b71c5", "name": "Primary Liable party name"}, {"uuid": "8f8b2c45-1a79-4a22-a1e0-8cb92844c47d", "name": "Full Property Address"}, {"uuid": "46546b98-8c65-47c0-8ee6-651463c78de2", "name": "Current Relief Type"}, {"uuid": "853fee30-3d9b-453a-8bf9-8b2afa6186e3", "name": "Account Start date"}, {"uuid": "e78a9bc5-c166-4372-b8cd-ed51705dc764", "name": "Current Relief Award Start Date"}, {"uuid": "d1e16dcf-ff78-415e-bf67-09af0b72a676", "name": "Current Rateable Value", "type": "number"}], "key": {"uuid": "f1021dc9-458c-42c5-9a68-78fc72dd7d7f", "name": "Property Reference Number"}, "checksum": "b180bd9fe8c3b1025f433e0b3377fb9a738523b9c33eac5d62ed83c51883e1f64a3895edf0fc9e96a85a4130df3392177dff262963338971114aa4f5d1b0a70e", "row_count": 3421}], "working_data": {"uuid": "741bbb39-5213-461d-8fa0-c467fcc07860", "path": "/mnt/c/Users/Turukawa/Documents/GitHub/whyqd/tests/temp_data/working_test_method_21ef69ffa24d4b2dac2206470d413b33.xlsx", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"uuid": "41b3acbe-939e-48c8-8b63-955e1a08c4d4", "name": "Property ref no", "type": "number"}, {"uuid": "42ad26ff-b536-496b-ac44-adf733e46c7c", "name": "Full Property Address_x"}, {"uuid": "8a42fb8d-4666-42e1-8236-126e532ed66c", "name": "Primary Liable party name_x"}, {"uuid": "bf7cb229-17f2-484e-b027-f8981e00a726", "name": "Account Start date_x"}, {"uuid": "ec2876f2-b13e-45d7-90b7-9d6ba279e97e", "name": "Current Rateable Value_x", "type": "number"}, {"uuid": "59a94b6a-6253-4e38-97b6-147e94093fb2", "name": "Full Property Address_y"}, {"uuid": "404a4166-3661-468a-86fc-5f90565848b1", "name": "Current Property Exemption Code"}, {"uuid": "8f32ff84-8bbc-45b8-add8-a875b5a99dbb", "name": "Current Prop Exemption Start Date"}, {"uuid": "17b198cb-d2be-4c51-bbc1-2a91567997bd", "name": "Primary Liable party name_y"}, {"uuid": "04f49b73-a5ce-4020-940b-cb1a5577bd6c", "name": "Current Rateable Value_y", "type": "number"}, {"uuid": "6e402a40-e6d1-454b-a2ed-a43b90fcfb1b", "name": "Primary Liable party name"}, {"uuid": "78d43b16-632e-428c-9e99-10b9b266a403", "name": "Full Property Address"}, {"uuid": "882b64e1-f47a-4ef2-a194-7f6b5d47448d", "name": "Current Relief Type"}, {"uuid": "bcef8c3f-6d71-43a2-ae29-6265cd788a8c", "name": "Account Start date_y"}, {"uuid": "038ead58-fa07-4a80-8e9c-e7968f28969d", "name": "Current Relief Award Start Date"}, {"uuid": "a511369e-5aac-418c-ab44-2e1de1bec079", "name": "Current Rateable Value", "type": "number"}], "preserve": [{"uuid": "f6b76bf2-0f6f-4060-a9d1-44fa00894965", "name": "Full Property Address_x"}, {"uuid": "f2f971c0-3962-42a7-b877-80cba5590d16", "name": "Primary Liable party name_x"}, {"uuid": "3d0be8cd-1327-444f-9dc0-5e1cf54f07a4", "name": "Account Start date_x"}, {"uuid": "de4cbcd7-808d-49a4-85d7-54391abe2a49", "name": "Full Property Address_y"}, {"uuid": "6698041c-eb2d-46e8-9439-246508a478b9", "name": "Current Property Exemption Code"}, {"uuid": "efaaf138-2e29-4b8f-ac1f-db8247f6a7e6", "name": "Current Prop Exemption Start Date"}, {"uuid": "b214ecb1-84af-4c07-b88f-56ab0ac3c21c", "name": "Primary Liable party name_y"}, {"uuid": "a9391b0a-43a8-402e-b2a8-98188bdd79c0", "name": "Primary Liable party name"}, {"uuid": "9d9a0efe-3b7c-4293-a577-d0024e8cfe44", "name": "Full Property Address"}, {"uuid": "afde81df-e1b0-4df9-8a33-4ec9038b761d", "name": "Current Relief Type"}, {"uuid": "a1296a35-665c-455e-8f75-f88b37e3074a", "name": "Account Start date_y"}, {"uuid": "70596fc4-41f8-4a41-aac4-71bee4305431", "name": "Current Relief Award Start Date"}], "actions": [{"uuid": "41c73711-1eb0-4a61-b200-983daf3bc8d6", "script": "MERGE < ['Property ref no'::'cfa11a17082245fe8d91a9e56eb52948', 'Property Reference Number'::'06a7a7c6b1144bfab096c7eb4a5fa1d8', 'Property Reference Number'::'986d2d10ecdf45369dc44a19c2a07581']"}, {"uuid": "bb6abd3a-d921-4122-9fb2-61fc0266a350", "script": "NEW > 'la_code' < ['E06000044']"}, {"uuid": "8f0d9d5e-6584-4d8e-ab3c-0f8e163e5674", "script": "RENAME > 'ba_ref' < ['Property ref no']"}, {"uuid": "860812d9-97a2-4fba-bf02-6d9af99133e3", "script": "ORDER > 'prop_ba_rates' < ['Current Rateable Value_x', 'Current Rateable Value_y', 'Current Rateable Value']"}, {"uuid": "28313551-73c3-4296-926c-ebd2beeb456b", "script": "ORDER > 'occupant_name' < ['Primary Liable party name_x', 'Primary Liable party name_y', 'Primary Liable party name']"}, {"uuid": "18108aeb-7bee-4ea4-a2f6-7938cf708af9", "script": "ORDER > 'postcode' < ['Full Property Address_x', 'Full Property Address_y', 'Full Property Address']"}, {"uuid": "bf03e6c5-ad79-472d-8cd7-aead7d131e8d", "script": "CATEGORISE > 'occupation_state' < [+ 'Current Property Exemption Code', + 'Current Relief Type']"}, {"uuid": "8931927b-6e75-423d-840a-c0501ae2e8e9", "script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state'::False < 'Current Property Exemption Code'::['EPRN', 'EPRI', 'VOID', 'EPCH', 'LIQUIDATE', 'DECEASED', 'PROHIBITED', 'BANKRUPT']"}, {"uuid": "ec746b66-b34f-4f71-9a18-1be9ddc003b0", "script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state'::False < 'Current Relief Type'::['Empty Property Rate Non-Industrial', 'Empty Property Rate Industrial', 'Empty Property Rate Charitable']"}, {"uuid": "df805f0e-6de9-4213-8074-c56a1ad77d83", "script": "CATEGORISE > 'occupation_state_reliefs' < [+ 'Current Property Exemption Code', + 'Current Relief Type']"}, {"uuid": "affb89e5-29b1-47b9-a7ae-9db0a232fe23", "script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'small_business' < 'Current Relief Type'::['Small Business Relief England', 'Sbre Extension For 12 Months', 'Supporting Small Business Relief']"}, {"uuid": "27ed4944-1859-4d64-aad8-8f195d99a2f1", "script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'enterprise_zone' < 'Current Property Exemption Code'::['INDUSTRIAL']"}, {"uuid": "8d101ec1-683c-4f31-856d-03db29a3c0b5", "script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'vacancy' < 'Current Property Exemption Code'::['EPRN', 'EPRI', 'VOID', 'EPCH', 'LIQUIDATE', 'DECEASED', 'PROHIBITED', 'BANKRUPT']"}, {"uuid": "6b446b8d-68f5-4cac-901a-488a63050e0f", "script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'vacancy' < 'Current Relief Type'::['Empty Property Rate Non-Industrial', 'Empty Property Rate Industrial', 'Empty Property Rate Charitable']"}, {"uuid": "3f069cc8-f35b-4554-a7fb-231c7447b624", "script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'retail' < 'Current Relief Type'::['Retail Discount']"}, {"uuid": "e4d63895-f46c-4854-91af-6a6ccc984b81", "script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'exempt' < 'Current Property Exemption Code'::['C', 'LOW RV', 'LAND']"}, {"uuid": "877bdb3f-780e-42de-a4d0-512559e46738", "script": "ASSIGN_CATEGORY_UNIQUES > 'occupation_state_reliefs'::'other' < 'Current Relief Type'::['Sports Club (Registered CASC)', 'Mandatory']"}, {"uuid": "442fd644-7969-43bc-8b87-455abdd88bdf", "script": "ORDER_NEW > 'occupation_state_date' < ['Current Prop Exemption Start Date' + 'Current Prop Exemption Start Date', 'Current Relief Award Start Date' + 'Current Relief Award Start Date', 'Account Start date_x' + 'Account Start date_x', 'Account Start date_y' + 'Account Start date_y']"}, {"uuid": "57f628e0-0f35-46f7-b347-950a9632f29a", "script": "FILTER_AFTER > 'occupation_state_date'::'2010-01-01'"}], "checksum": "ed3eb9fccfaccc23825eda7be14af89bbbb6dab98a5a414b7b13590c5251a84b8471ef1ca1a740feabb24273a8ed4a782496cc80335dc01d376cdce3286e8b7b", "row_count": 6037}, "restructured_data": {"uuid": "39ab335f-9c22-4686-8258-051046499874", "path": "/mnt/c/Users/Turukawa/Documents/GitHub/whyqd/tests/temp_data/restructured_test_method_21ef69ffa24d4b2dac2206470d413b33.xlsx", "mime": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "columns": [{"uuid": "83e82584-8c9b-4d2c-a3a2-805044aa87f8", "name": "la_code"}, {"uuid": "f3ed34fa-390f-4eb2-b40c-91670ef332b6", "name": "ba_ref", "type": "number"}, {"uuid": "c4b7a155-7e82-4541-a1ad-be94c47c014e", "name": "prop_ba_rates", "type": "number"}, {"uuid": "c8bcf837-8b2f-4f73-8c72-a814c4541a28", "name": "occupant_name"}, {"uuid": "2cd50a67-717b-457b-b3dc-f5abe01229f5", "name": "postcode"}, {"uuid": "ebc26696-13f1-4b35-818e-b1a8b27d49d8", "name": "occupation_state"}, {"uuid": "723209d5-2849-46de-8626-185046ab5341", "name": "occupation_state_date"}, {"uuid": "da207a7a-9e1f-4d53-acdd-60519d7becec", "name": "occupation_state_reliefs"}], "preserve": [{"uuid": "8f7041ed-9518-4b91-9da3-548bd9d4e770", "name": "la_code"}, {"uuid": "a491cc0e-f2d9-4db5-b69e-f0fd9cda24d2", "name": "occupant_name"}, {"uuid": "c867f2ff-3804-49db-b8a4-7496e124c25f", "name": "postcode"}, {"uuid": "2bc787c3-c5f0-4ca5-bc2f-9a572e883611", "name": "occupation_state"}, {"uuid": "e76bddfa-81f8-4f3b-8551-cda10b8522e2", "name": "occupation_state_date"}, {"uuid": "2eb5089c-091d-4360-a64a-22b35c7e863e", "name": "occupation_state_reliefs"}], "checksum": "48873950fcb0cbfac9cd2e4ff056daa30d926fdc0bcc46d30274ac86b34f72985b29dfaa38dc6f28643c4d168c0af7ddd262e3ce2e43692752f002f7b81251e0"}, "citation": {"author": "Gavin Chait", "title": "Portsmouth City Council normalised database of commercial ratepayers", "url": "https://github.com/whythawk/whyqd/tree/master/tests/data", "month": "feb", "year": 2020}, "version": [{"description": "Build merged data.", "updated": "2023-01-07T08:56:39.890124"}, {"description": "Build restructured data.", "updated": "2023-01-07T08:57:40.267944"}, {"name": "Gavin Chait", "description": "Save method.", "updated": "2023-01-07T08:57:40.268378"}]}