

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>whyqd: simplicity, transparency, speed &mdash; whyqd 0.5.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dependencies, installation &amp; importing" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> whyqd
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Dependencies, installation &amp; importing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_local_government_data.html">Tutorial: Local government data</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_cthulhu_data.html">Tutorial: Cthulhu data</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Distribution &amp; Citation of methods and data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Creating and managing Schemas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="schema.html">Schema</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Wrangling with Methods</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="method.html">Method</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Validate an existing Method</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="validate.html">Validate</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">What next?</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Background and Contributing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="schema_api.html">Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="method_api.html">Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_api.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="validate_api.html">Validate</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">whyqd</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>whyqd: simplicity, transparency, speed</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="whyqd-simplicity-transparency-speed">
<h1>whyqd: simplicity, transparency, speed<a class="headerlink" href="#whyqd-simplicity-transparency-speed" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-it">
<h2>What is it?<a class="headerlink" href="#what-is-it" title="Permalink to this headline">¶</a></h2>
<p><strong>whyqd</strong> provides an intuitive method for restructuring messy data to conform to a standardised
metadata schema. It supports data managers and researchers looking to rapidly, and continuously,
normalise any messy spreadsheets using a simple series of steps. Once complete, you can import
wrangled data into more complex analytical systems or full-feature wrangling tools.</p>
<p>It aims to get you to the point where you can perform automated data munging prior to
committing your data into a database, and no further. It is built on Pandas, and plays well with
existing Python-based data-analytical tools. Each raw source file will produce a json schema and
method file which defines the set of actions to be performed to produce refined data, and a
destination file validated against that schema.</p>
<p><strong>whyqd</strong> ensures complete audit transparency by saving all actions performed to restructure
your input data to a separate json-defined methods file. This permits others to read and scrutinise
your approach, validate your methodology, or even use your methods to import data in production.</p>
<p>Once complete, a method file can be shared, along with your input data, and anyone can
import <strong>whyqd</strong> and validate your method to verify that your output data is the product of these
inputs.</p>
</div>
<div class="section" id="why-use-it">
<h2>Why use it?<a class="headerlink" href="#why-use-it" title="Permalink to this headline">¶</a></h2>
<p>If all you want to do is test whether your source data are even useful, spending days or weeks
slogging through data restructuring could kill a project. If you already have a workflow and
established software which includes Python and pandas, having to change your code every time your
source data changes is really, really frustrating.</p>
<p>If you want to go from a Cthulhu dataset like this:</p>
<div class="figure align-default" id="id1">
<img alt="UNDP Human Development Index 2007-2008" src="_images/undp-hdi-2007-8.jpg" />
<p class="caption"><span class="caption-text">UNDP Human Development Index 2007-2008: a beautiful example of messy data.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>To this:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 31%" />
<col style="width: 23%" />
<col style="width: 17%" />
<col style="width: 10%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>country_name</p></th>
<th class="head"><p>indicator_name</p></th>
<th class="head"><p>reference</p></th>
<th class="head"><p>year</p></th>
<th class="head"><p>values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Hong Kong, China (SAR)</p></td>
<td><p>HDI rank</p></td>
<td><p>e</p></td>
<td><p>2008</p></td>
<td><p>21</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Singapore</p></td>
<td><p>HDI rank</p></td>
<td><p>nan</p></td>
<td><p>2008</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Korea (Republic of)</p></td>
<td><p>HDI rank</p></td>
<td><p>nan</p></td>
<td><p>2008</p></td>
<td><p>26</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Cyprus</p></td>
<td><p>HDI rank</p></td>
<td><p>nan</p></td>
<td><p>2008</p></td>
<td><p>28</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Brunei Darussalam</p></td>
<td><p>HDI rank</p></td>
<td><p>nan</p></td>
<td><p>2008</p></td>
<td><p>30</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Barbados</p></td>
<td><p>HDI rank</p></td>
<td><p>e,g, f</p></td>
<td><p>2008</p></td>
<td><p>31</p></td>
</tr>
</tbody>
</table>
<p>With a readable set of scripts to ensure that your process can be audited and repeated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scripts</span> <span class="o">=</span> <span class="p">[</span>
<span class="go">      &quot;DEBLANK&quot;,</span>
<span class="go">      &quot;DEDUPE&quot;,</span>
<span class="go">      &quot;REBASE &lt; [11]&quot;,</span>
<span class="go">      f&quot;DELETE_ROWS &lt; {[int(i) for i in np.arange(144, df.index[-1]+1)]}&quot;,</span>
<span class="go">      &quot;RENAME_ALL &gt; [&#39;HDI rank&#39;, &#39;Country&#39;, &#39;Human poverty index (HPI-1) - Rank;;2008&#39;, &#39;Reference 1&#39;, &#39;Human poverty index (HPI-1) - Value (%);;2008&#39;, &#39;Probability at birth of not surviving to age 40 (% of cohort);;2000-05&#39;, &#39;Reference 2&#39;, &#39;Adult illiteracy rate (% aged 15 and older);;1995-2005&#39;, &#39;Reference 3&#39;, &#39;Population not using an improved water source (%);;2004&#39;, &#39;Reference 4&#39;, &#39;Children under weight for age (% under age 5);;1996-2005&#39;, &#39;Reference 5&#39;, &#39;Population below income poverty line (%) - $1 a day;;1990-2005&#39;, &#39;Reference 6&#39;, &#39;Population below income poverty line (%) - $2 a day;;1990-2005&#39;, &#39;Reference 7&#39;, &#39;Population below income poverty line (%) - National poverty line;;1990-2004&#39;, &#39;Reference 8&#39;, &#39;HPI-1 rank minus income poverty rank;;2008&#39;]&quot;,</span>
<span class="go">      &quot;PIVOT_CATEGORIES &gt; [&#39;HDI rank&#39;] &lt; [14,44,120]&quot;,</span>
<span class="go">      &quot;RENAME_NEW &gt; &#39;HDI Category&#39;::[&#39;PIVOT_CATEGORIES_idx_20_0&#39;]&quot;,</span>
<span class="go">      &quot;PIVOT_LONGER &gt; = [&#39;HDI rank&#39;, &#39;HDI Category&#39;, &#39;Human poverty index (HPI-1) - Rank;;2008&#39;, &#39;Human poverty index (HPI-1) - Value (%);;2008&#39;, &#39;Probability at birth of not surviving to age 40 (% of cohort);;2000-05&#39;, &#39;Adult illiteracy rate (% aged 15 and older);;1995-2005&#39;, &#39;Population not using an improved water source (%);;2004&#39;, &#39;Children under weight for age (% under age 5);;1996-2005&#39;, &#39;Population below income poverty line (%) - $1 a day;;1990-2005&#39;, &#39;Population below income poverty line (%) - $2 a day;;1990-2005&#39;, &#39;Population below income poverty line (%) - National poverty line;;1990-2004&#39;, &#39;HPI-1 rank minus income poverty rank;;2008&#39;]&quot;,</span>
<span class="go">      &quot;SPLIT &gt; &#39;;;&#39;::[&#39;PIVOT_LONGER_names_idx_9&#39;]&quot;,</span>
<span class="go">      f&quot;JOIN &gt; &#39;reference&#39; &lt; {reference_columns}&quot;,</span>
<span class="go">      &quot;RENAME &gt; &#39;indicator_name&#39; &lt; [&#39;SPLIT_idx_11_0&#39;]&quot;,</span>
<span class="go">      &quot;RENAME &gt; &#39;country_name&#39; &lt; [&#39;Country&#39;]&quot;,</span>
<span class="go">      &quot;RENAME &gt; &#39;year&#39; &lt; [&#39;SPLIT_idx_12_1&#39;]&quot;,</span>
<span class="go">      &quot;RENAME &gt; &#39;values&#39; &lt; [&#39;PIVOT_LONGER_values_idx_10&#39;]&quot;,</span>
<span class="go">   ]</span>
</pre></div>
</div>
<p>There are two complex and time-consuming parts to preparing data for analysis: social, and technical.</p>
<p>The social part requires multi-stakeholder engagement with source data-publishers, and with
destination database users, to agree structural metadata. Without any agreement on data publication
formats or destination structure, you are left with the tedious frustration of manually wrangling
each independent dataset into a single schema.</p>
<p><strong>whyqd</strong> allows you to get to work without requiring you to achieve buy-in from anyone or change
your existing code.</p>
</div>
<div class="section" id="how-does-it-work">
<h2>How does it work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h2>
<p>There are two worked tutorials to demonstrate how you can use <cite>whyqd</cite> to support source data curation transparency:</p>
<ul class="simple">
<li><p><a class="reference internal" href="tutorial_local_government_data.html"><span class="doc">Local-government data</span></a></p></li>
<li><p><a class="reference internal" href="tutorial_cthulhu_data.html"><span class="doc">Data produced by Cthulhu</span></a></p></li>
</ul>
<p>The core process is as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>Create, update or import a data schema which defines the destination data structure,</p></li>
<li><p>Create a new method and associate it with your schema and input data source/s,</p></li>
<li><p>Assign a foreign key column and (if required) merge input data sources,</p></li>
<li><p>Structure input data fields to conform to the requriements for each schema field,</p></li>
<li><p>Assign categorical data identified during structuring,</p></li>
<li><p>Transform and filter input data to produce a final destination data file,</p></li>
<li><p>Share your data and a citation.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="licencing">
<h2>Licencing<a class="headerlink" href="#licencing" title="Permalink to this headline">¶</a></h2>
<p><strong>whyqd</strong> is distributed under a 3-clause (“Simplified” or “New”) BSD license.</p>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Dependencies, installation &amp; importing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installing">Installing</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#api-changes">API changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_local_government_data.html">Tutorial: Local government data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial_local_government_data.html#creating-a-schema">Creating a Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_local_government_data.html#creating-a-method">Creating a Method</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial_local_government_data.html#initialise-a-method-and-import-input-data">Initialise a Method and import input data</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_local_government_data.html#organise-and-merge-input-data">Organise and Merge input data</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_local_government_data.html#create-wrangling-actions">Create wrangling actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_local_government_data.html#filtering-is-optional">Filtering is optional</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_local_government_data.html#transform-your-data">Transform your data</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_local_government_data.html#method-validation">Method Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_local_government_data.html#preparing-a-citation">Preparing a Citation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_cthulhu_data.html">Tutorial: Cthulhu data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cthulhu_data.html#creating-a-schema">Creating a Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cthulhu_data.html#morphing-with-methods">Morphing with Methods</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Distribution &amp; Citation of methods and data</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Creating and managing Schemas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="schema.html">Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="schema.html#minimum-valid-requirements">Minimum valid requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema.html#schema-descriptors">Schema descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema.html#field-descriptors">Field descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema.html#field-constraints">Field constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema.html#field-constraints-category">Field constraints: category</a></li>
</ul>
</li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Wrangling with Methods</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="method.html">Method</a><ul>
<li class="toctree-l2"><a class="reference internal" href="method.html#import-source-data">Import source data</a></li>
<li class="toctree-l2"><a class="reference internal" href="method.html#merge">Merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="method.html#restructure-with-actions">Restructure with Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="method.html#build">Build</a></li>
<li class="toctree-l2"><a class="reference internal" href="method.html#validation">Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="method.html#citation">Citation</a></li>
</ul>
</li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Validate an existing Method</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="validate.html">Validate</a><ul>
<li class="toctree-l2"><a class="reference internal" href="validate.html#perform-validation">Perform validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="validate.html#what-gets-validated">What gets validated</a></li>
</ul>
</li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">What next?</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Background and Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#background">Background</a></li>
</ul>
</li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Reference API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="schema_api.html">Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="method_api.html">Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_api.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="validate_api.html">Validate</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="installation.html" class="btn btn-neutral float-right" title="Dependencies, installation &amp; importing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Gavin Chait.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>